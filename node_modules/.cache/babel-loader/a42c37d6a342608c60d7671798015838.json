{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/aatf-views-very-last/src/views/admin/tables/_form.tsx\";\nimport React, { useState } from \"react\";\nimport { useMutate } from \"restful-react\";\nimport { useHistory } from \"react-router-dom\";\nimport Loading from \"components/Loading\";\nimport { Button, Card, Form, FormGroup, Label, Col, Input, DropdownItem } from \"reactstrap\";\nimport Autocomplete from \"components/Autocomplete\";\nimport _ from \"lodash\";\nimport { defaults } from \".\";\nexport default function TableForm(props) {\n  const history = useHistory();\n  const [table, setTable] = useState({ ...props.table\n  });\n  const path = table._id === undefined ? `/tables` : `/tables/${table._id}`;\n\n  const SubmitTable = () => {\n    const {\n      mutate,\n      loading,\n      error\n    } = useMutate({\n      verb: props.method,\n      path: path\n    });\n\n    const submit = e => {\n      e.preventDefault();\n      mutate({\n        nameT: table.nameT,\n        description: table.description\n      }).then(() => history.push(\"/admin/tables\"));\n    };\n\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 7\n      }\n    }, error && /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 19\n      }\n    }, error.message), loading && /*#__PURE__*/React.createElement(Loading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 21\n      }\n    }), !loading && /*#__PURE__*/React.createElement(Button, {\n      onClick: submit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 22\n      }\n    }, \"Submit\"));\n  };\n\n  return /*#__PURE__*/React.createElement(Card, {\n    className: \"content-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(FormGroup, {\n    row: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    for: \"tableName\",\n    sm: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(Col, {\n    sm: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Autocomplete, {\n    url: s => `${process.env[\"REACT_APP_HOST_PYTHON\"]}/tables`,\n    toArray: d => d.data,\n    option: e => /*#__PURE__*/React.createElement(DropdownItem, {\n      onClick: () => setTable({ ...table,\n        nameT: e\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }\n    }, e),\n    optionFilter: (t, s) => !_.includes(defaults, t) && _.includes(t, s),\n    maxItems: 10,\n    placeholder: table.nameT || \"Select a table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }), table.nameT && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 29\n    }\n  }, \"Selected table: \", table.nameT))), /*#__PURE__*/React.createElement(FormGroup, {\n    row: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    for: \"tableDescription\",\n    sm: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(Col, {\n    sm: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    id: \"tableDescription\",\n    type: \"textarea\",\n    value: table.description,\n    onChange: e => setTable({ ...table,\n      description: e.target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(SubmitTable, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  })));\n}","map":{"version":3,"sources":["/Users/mac/Desktop/aatf-views-very-last/src/views/admin/tables/_form.tsx"],"names":["React","useState","useMutate","useHistory","Loading","Button","Card","Form","FormGroup","Label","Col","Input","DropdownItem","Autocomplete","_","defaults","TableForm","props","history","table","setTable","path","_id","undefined","SubmitTable","mutate","loading","error","verb","method","submit","e","preventDefault","nameT","description","then","push","message","s","process","env","d","data","t","includes","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { useMutate } from \"restful-react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Loading from \"components/Loading\";\r\nimport {\r\n  Button,\r\n  Card,\r\n  Form,\r\n  FormGroup,\r\n  Label,\r\n  Col,\r\n  Input,\r\n  DropdownItem,\r\n} from \"reactstrap\";\r\nimport { Table } from \"models/database\";\r\nimport Autocomplete from \"components/Autocomplete\";\r\nimport _ from \"lodash\";\r\nimport { defaults } from \".\";\r\n\r\ninterface FormProps {\r\n  table: Table;\r\n  method: \"POST\" | \"PATCH\";\r\n}\r\n\r\nexport default function TableForm(props: FormProps) {\r\n  const history = useHistory();\r\n\r\n  const [table, setTable] = useState({ ...props.table });\r\n\r\n  const path = table._id === undefined ? `/tables` : `/tables/${table._id}`;\r\n\r\n  const SubmitTable = () => {\r\n    const { mutate, loading, error } = useMutate({\r\n      verb: props.method,\r\n      path: path,\r\n    });\r\n\r\n    const submit = (e: React.MouseEvent) => {\r\n      e.preventDefault();\r\n      mutate({ nameT: table.nameT, description: table.description }).then(() =>\r\n        history.push(\"/admin/tables\")\r\n      );\r\n    };\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {error && <p>{error.message}</p>}\r\n        {loading && <Loading />}\r\n        {!loading && <Button onClick={submit}>Submit</Button>}\r\n      </React.Fragment>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Card className='content-card'>\r\n      <Form>\r\n        <FormGroup row>\r\n          <Label for='tableName' sm={2}>\r\n            Name\r\n          </Label>\r\n          <Col sm={10}>\r\n            {/* <Input\r\n              autoFocus\r\n              id='tableName'\r\n              value={table.nameT}\r\n              onChange={(e) => setTable({ ...table, nameT: e.target.value })}\r\n            /> */}\r\n            <Autocomplete<string, { data: string[] }>\r\n              url={(s) => `${process.env[\"REACT_APP_HOST_PYTHON\"]}/tables`}\r\n              toArray={(d) => d.data}\r\n              option={(e: string) => (\r\n                <DropdownItem onClick={() => setTable({ ...table, nameT: e })}>\r\n                  {e}\r\n                </DropdownItem>\r\n              )}\r\n              optionFilter={(t, s) =>\r\n                !_.includes(defaults, t) && _.includes(t, s)\r\n              }\r\n              maxItems={10}\r\n              placeholder={table.nameT || \"Select a table\"}\r\n            />\r\n            <br />\r\n            {table.nameT && <p>Selected table: {table.nameT}</p>}\r\n          </Col>\r\n        </FormGroup>\r\n        <FormGroup row>\r\n          <Label for='tableDescription' sm={2}>\r\n            Description\r\n          </Label>\r\n          <Col sm={10}>\r\n            <Input\r\n              id='tableDescription'\r\n              type='textarea'\r\n              value={table.description}\r\n              onChange={(e) =>\r\n                setTable({ ...table, description: e.target.value })\r\n              }\r\n            />\r\n          </Col>\r\n        </FormGroup>\r\n        <SubmitTable />\r\n      </Form>\r\n    </Card>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}