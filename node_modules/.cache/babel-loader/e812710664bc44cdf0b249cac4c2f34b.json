{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/aatf-views-very-last/src/views/admin/relations/tables.tsx\";\nimport React, { useState } from \"react\";\nimport { Card, DropdownItem, Table as TableElement, Button } from \"reactstrap\";\nimport Autocomplete from \"components/Autocomplete\";\nimport _ from \"lodash\";\nimport { useMutate } from \"restful-react\";\nexport default function Tables(props) {\n  const [tables, setTables] = useState(props.collection);\n  const {\n    mutate: add\n  } = useMutate({\n    path: props.api.add,\n    verb: \"PATCH\"\n  });\n  const {\n    mutate: remove\n  } = useMutate({\n    path: props.api.remove,\n    verb: \"PATCH\"\n  });\n\n  const relate = t => {\n    add({\n      tables: t._id\n    }).then(() => setTables([...tables, t]));\n  };\n\n  const unrelate = t => {\n    remove({\n      tables: t._id\n    }).then(() => setTables(tables.filter(tab => tab !== t)));\n  };\n\n  const filter = (t, s) => _.includes(t.nameT, s) && !_.includes(tables.map(e => e._id), t._id);\n\n  return /*#__PURE__*/React.createElement(Card, {\n    className: \"content-card margin-top-30\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Autocomplete, {\n    url: s => `/tables`,\n    option: e => /*#__PURE__*/React.createElement(DropdownItem, {\n      onClick: () => relate(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }\n    }, e.nameT),\n    optionFilter: filter,\n    maxItems: 10,\n    placeholder: \"Link tables by name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(TableElement, {\n    hover: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, tables.map((t, key) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: key,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 15\n    }\n  }, t.nameT), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 15\n    }\n  }, _.take(t.description, 100)), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"text-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    outline: true,\n    onClick: () => unrelate(t),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, \"Unrelate\")))))));\n}","map":{"version":3,"sources":["/Users/mac/Desktop/aatf-views-very-last/src/views/admin/relations/tables.tsx"],"names":["React","useState","Card","DropdownItem","Table","TableElement","Button","Autocomplete","_","useMutate","Tables","props","tables","setTables","collection","mutate","add","path","api","verb","remove","relate","t","_id","then","unrelate","filter","tab","s","includes","nameT","map","e","key","take","description"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Card, DropdownItem, Table as TableElement, Button } from \"reactstrap\";\r\nimport { Table } from \"models/database\";\r\nimport Autocomplete from \"components/Autocomplete\";\r\nimport _ from \"lodash\";\r\nimport { useMutate } from \"restful-react\";\r\n\r\ninterface TableRelationsProps<T> {\r\n  collection: Table[];\r\n  api: {\r\n    add: string;\r\n    remove: string;\r\n  };\r\n}\r\n\r\nexport default function Tables<T>(props: TableRelationsProps<T>) {\r\n  const [tables, setTables] = useState(props.collection);\r\n\r\n  const { mutate: add } = useMutate({\r\n    path: props.api.add,\r\n    verb: \"PATCH\",\r\n  });\r\n\r\n  const { mutate: remove } = useMutate({\r\n    path: props.api.remove,\r\n    verb: \"PATCH\",\r\n  });\r\n\r\n  const relate = (t: Table) => {\r\n    add({ tables: t._id }).then(() => setTables([...tables, t]));\r\n  };\r\n\r\n  const unrelate = (t: Table) => {\r\n    remove({ tables: t._id }).then(() =>\r\n      setTables(tables.filter((tab) => tab !== t))\r\n    );\r\n  };\r\n\r\n  const filter = (t: Table, s: string) =>\r\n    _.includes(t.nameT, s) &&\r\n    !_.includes(\r\n      tables.map((e) => e._id),\r\n      t._id\r\n    );\r\n\r\n  return (\r\n    <Card className='content-card margin-top-30'>\r\n      <Autocomplete<Table, Table>\r\n        url={(s) => `/tables`}\r\n        option={(e) => (\r\n          <DropdownItem onClick={() => relate(e)}>{e.nameT}</DropdownItem>\r\n        )}\r\n        optionFilter={filter}\r\n        maxItems={10}\r\n        placeholder='Link tables by name'\r\n      />\r\n      <br />\r\n      <TableElement hover>\r\n        <thead>\r\n          <tr>\r\n            <th>Name</th>\r\n            <th>Description</th>\r\n            <th />\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {tables.map((t, key) => (\r\n            <tr key={key}>\r\n              <td>{t.nameT}</td>\r\n              <td>{_.take(t.description, 100)}</td>\r\n              <td className='text-right'>\r\n                <Button outline onClick={() => unrelate(t)}>\r\n                  Unrelate\r\n                </Button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </TableElement>\r\n    </Card>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}