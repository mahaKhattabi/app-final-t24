{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/aatf-views-very-last/src/components/ApiTable.tsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { Table, Button } from \"reactstrap\";\nimport { useGet, useMutate } from \"restful-react\";\nimport Loading from \"./Loading\";\nexport function ApiTable(props) {\n  const {\n    api: {\n      filter\n    }\n  } = props;\n  const [elements, setElements] = useState([]);\n  const {\n    data,\n    loading,\n    error\n  } = useGet(props.api.get);\n  const {\n    mutate\n  } = useMutate({\n    verb: \"DELETE\",\n    path: props.api.delete.path\n  });\n  useEffect(() => {\n    if (data !== null) setElements(data);\n  }, [data]);\n\n  const delElement = elem => {\n    if (window.confirm(\"Want to delete?\")) {\n      mutate(props.api.delete.id(elem)).then(() => setElements(elements.filter(e => e !== elem)));\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  }, loading && /*#__PURE__*/React.createElement(Loading, {\n    centerScreen: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 19\n    }\n  }, \"Loading...\"), error && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 17\n    }\n  }, error.message), data && /*#__PURE__*/React.createElement(Table, {\n    hover: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, props.thead.map(head => /*#__PURE__*/React.createElement(\"th\", {\n    key: head.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }, head.name)), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  }, elements.filter(e => filter ? filter(e) : true).map((d, key) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: key,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, props.tbody(d), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"text-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"danger\",\n    outline: true,\n    onClick: () => delElement(d),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 21\n    }\n  }, \"Delete\")))))));\n}","map":{"version":3,"sources":["/Users/mac/Desktop/aatf-views-very-last/src/components/ApiTable.tsx"],"names":["React","useState","useEffect","Table","Button","useGet","useMutate","Loading","ApiTable","props","api","filter","elements","setElements","data","loading","error","get","mutate","verb","path","delete","delElement","elem","window","confirm","id","then","e","message","thead","map","head","name","d","key","tbody"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,KAAT,EAAgBC,MAAhB,QAA8B,YAA9B;AACA,SAASC,MAAT,EAAiBC,SAAjB,QAAkC,eAAlC;AACA,OAAOC,OAAP,MAAoB,WAApB;AAeA,OAAO,SAASC,QAAT,CAAqBC,KAArB,EAAyC;AAC9C,QAAM;AACJC,IAAAA,GAAG,EAAE;AAAEC,MAAAA;AAAF;AADD,MAEFF,KAFJ;AAIA,QAAM,CAACG,QAAD,EAAWC,WAAX,IAA0BZ,QAAQ,CAAM,EAAN,CAAxC;AAEA,QAAM;AAAEa,IAAAA,IAAF;AAAQC,IAAAA,OAAR;AAAiBC,IAAAA;AAAjB,MAA2BX,MAAM,CAAMI,KAAK,CAACC,GAAN,CAAUO,GAAhB,CAAvC;AAEA,QAAM;AAAEC,IAAAA;AAAF,MAAaZ,SAAS,CAAC;AAC3Ba,IAAAA,IAAI,EAAE,QADqB;AAE3BC,IAAAA,IAAI,EAAEX,KAAK,CAACC,GAAN,CAAUW,MAAV,CAAiBD;AAFI,GAAD,CAA5B;AAKAlB,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIY,IAAI,KAAK,IAAb,EAAmBD,WAAW,CAACC,IAAD,CAAX;AACpB,GAFQ,EAEN,CAACA,IAAD,CAFM,CAAT;;AAIA,QAAMQ,UAAU,GAAIC,IAAD,IAAa;AAC9B,QAAIC,MAAM,CAACC,OAAP,CAAe,iBAAf,CAAJ,EAAuC;AACrCP,MAAAA,MAAM,CAACT,KAAK,CAACC,GAAN,CAAUW,MAAV,CAAiBK,EAAjB,CAAoBH,IAApB,CAAD,CAAN,CAAkCI,IAAlC,CAAuC,MACrCd,WAAW,CAACD,QAAQ,CAACD,MAAT,CAAiBiB,CAAD,IAAOA,CAAC,KAAKL,IAA7B,CAAD,CADb;AAGD;AACF,GAND;;AAQA,sBACE,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGR,OAAO,iBAAI,oBAAC,OAAD;AAAS,IAAA,YAAY,MAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADd,EAEGC,KAAK,iBAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIA,KAAK,CAACa,OAAV,CAFZ,EAGGf,IAAI,iBACH,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGL,KAAK,CAACqB,KAAN,CAAYC,GAAZ,CAAiBC,IAAD,iBACf;AAAI,IAAA,GAAG,EAAEA,IAAI,CAACC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAqBD,IAAI,CAACC,IAA1B,CADD,CADH,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,CADF,CADF,eASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGrB,QAAQ,CACND,MADF,CACUiB,CAAD,IAAQjB,MAAM,GAAGA,MAAM,CAACiB,CAAD,CAAT,GAAe,IADtC,EAEEG,GAFF,CAEM,CAACG,CAAD,EAAIC,GAAJ,kBACH;AAAI,IAAA,GAAG,EAAEA,GAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG1B,KAAK,CAAC2B,KAAN,CAAYF,CAAZ,CADH,eAEE;AAAI,IAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AACE,IAAA,KAAK,EAAC,QADR;AAEE,IAAA,OAAO,MAFT;AAGE,IAAA,OAAO,EAAE,MAAMZ,UAAU,CAACY,CAAD,CAH3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CAFF,CAHH,CADH,CATF,CAJJ,CADF;AAoCD","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Table, Button } from \"reactstrap\";\r\nimport { useGet, useMutate } from \"restful-react\";\r\nimport Loading from \"./Loading\";\r\n\r\ninterface ApiProps<T> {\r\n  thead: { name: string }[];\r\n  tbody: (e: T) => JSX.Element;\r\n  api: {\r\n    get: string;\r\n    filter?: (t: T) => boolean;\r\n    delete: {\r\n      path: string;\r\n      id: (e: T) => any;\r\n    };\r\n  };\r\n}\r\n\r\nexport function ApiTable<T>(props: ApiProps<T>) {\r\n  const {\r\n    api: { filter },\r\n  } = props;\r\n\r\n  const [elements, setElements] = useState<T[]>([]);\r\n\r\n  const { data, loading, error } = useGet<T[]>(props.api.get);\r\n\r\n  const { mutate } = useMutate({\r\n    verb: \"DELETE\",\r\n    path: props.api.delete.path,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (data !== null) setElements(data);\r\n  }, [data]);\r\n\r\n  const delElement = (elem: T) => {\r\n    if (window.confirm(\"Want to delete?\")) {\r\n      mutate(props.api.delete.id(elem)).then(() =>\r\n        setElements(elements.filter((e) => e !== elem))\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {loading && <Loading centerScreen>Loading...</Loading>}\r\n      {error && <p>{error.message}</p>}\r\n      {data && (\r\n        <Table hover>\r\n          <thead>\r\n            <tr>\r\n              {props.thead.map((head) => (\r\n                <th key={head.name}>{head.name}</th>\r\n              ))}\r\n              <th></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {elements\r\n              .filter((e) => (filter ? filter(e) : true))\r\n              .map((d, key) => (\r\n                <tr key={key}>\r\n                  {props.tbody(d)}\r\n                  <td className='text-right'>\r\n                    <Button\r\n                      color='danger'\r\n                      outline\r\n                      onClick={() => delElement(d)}\r\n                    >\r\n                      Delete\r\n                    </Button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n          </tbody>\r\n        </Table>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}