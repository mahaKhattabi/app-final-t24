{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/aatf-views-very-last/src/views/website/Domains/show.tsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { useGet } from \"restful-react\";\nimport _ from \"lodash\";\nimport Loading from \"components/Loading\";\nimport Heading from \"components/Heading\";\nimport { List as ListProcesses } from \"../Processes/index\";\nimport { List as ListTables } from \"../Tables/index\";\nimport { useParams } from \"react-router-dom\";\nimport { ButtonGroup, Button } from \"reactstrap\";\nexport default function Show() {\n  const {\n    id\n  } = useParams();\n  const {\n    data: domain,\n    loading\n  } = useGet(`/domaines/${id}`);\n  const [filterProc, setFilterProc] = useState([]);\n  const [filterTab, setFilterTab] = useState([]);\n  const [searchProc, setSearchProc] = useState(\"\");\n  const [searchTab, setSearchTab] = useState(\"\");\n  const [showTab, setShowTab] = useState(1);\n  useEffect(() => {\n    if (domain) setFilterProc(domain.processus.filter(p => _.includes(p.nameP + p.description, searchProc)));\n  }, [domain, searchProc]);\n  useEffect(() => {\n    if (domain && domain.tables !== undefined) setFilterTab(domain.tables.filter(t => _.includes(t.nameT + t.description, searchTab)));\n  }, [domain, searchTab]);\n\n  const ButtonNav = props => /*#__PURE__*/React.createElement(Button, {\n    className: showTab === props.nav ? \"nav-active\" : \"nav-blank\",\n    onClick: () => setShowTab(props.nav),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 5\n    }\n  }, props.children);\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, loading && /*#__PURE__*/React.createElement(Loading, {\n    centerScreen: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 19\n    }\n  }, \"Loading domaines...\"), domain && /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Heading, {\n    header: domain.nameD,\n    content: \"Domaine\",\n    description: domain.description,\n    component: /*#__PURE__*/React.createElement(ButtonGroup, {\n      size: \"sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(ButtonNav, {\n      nav: 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }\n    }, \"Processus\"), /*#__PURE__*/React.createElement(ButtonNav, {\n      nav: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }\n    }, \"Tables\")),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 11\n    }\n  }), showTab === 1 && /*#__PURE__*/React.createElement(ListProcesses, {\n    filtered: filterProc,\n    setSearch: setSearchProc,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }), showTab === 2 && /*#__PURE__*/React.createElement(ListTables, {\n    filtered: filterTab,\n    setSearch: setSearchTab,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  })));\n}","map":{"version":3,"sources":["/Users/mac/Desktop/aatf-views-very-last/src/views/website/Domains/show.tsx"],"names":["React","useState","useEffect","useGet","_","Loading","Heading","List","ListProcesses","ListTables","useParams","ButtonGroup","Button","Show","id","data","domain","loading","filterProc","setFilterProc","filterTab","setFilterTab","searchProc","setSearchProc","searchTab","setSearchTab","showTab","setShowTab","processus","filter","p","includes","nameP","description","tables","undefined","t","nameT","ButtonNav","props","nav","children","nameD"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, FunctionComponent } from \"react\";\r\nimport { useGet } from \"restful-react\";\r\nimport { Process, Table, Domain } from \"models/database\";\r\nimport _ from \"lodash\";\r\nimport Loading from \"components/Loading\";\r\nimport Heading from \"components/Heading\";\r\n\r\nimport { List as ListProcesses } from \"../Processes/index\";\r\nimport { List as ListTables } from \"../Tables/index\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { ButtonGroup, Button } from \"reactstrap\";\r\n\r\nexport default function Show() {\r\n  const { id } = useParams();\r\n  const { data: domain, loading } = useGet<Domain>(`/domaines/${id}`);\r\n\r\n  const [filterProc, setFilterProc] = useState<Process[]>([]);\r\n  const [filterTab, setFilterTab] = useState<Table[]>([]);\r\n\r\n  const [searchProc, setSearchProc] = useState(\"\");\r\n  const [searchTab, setSearchTab] = useState(\"\");\r\n\r\n  const [showTab, setShowTab] = useState(1);\r\n\r\n  useEffect(() => {\r\n    if (domain)\r\n      setFilterProc(\r\n        domain.processus.filter((p) =>\r\n          _.includes(p.nameP + p.description, searchProc)\r\n        )\r\n      );\r\n  }, [domain, searchProc]);\r\n\r\n  useEffect(() => {\r\n    if (domain && domain.tables !== undefined)\r\n      setFilterTab(\r\n        domain.tables.filter((t) =>\r\n          _.includes(t.nameT + t.description, searchTab)\r\n        )\r\n      );\r\n  }, [domain, searchTab]);\r\n\r\n  const ButtonNav: FunctionComponent<{ nav: number }> = (props) => (\r\n    <Button\r\n      className={showTab === props.nav ? \"nav-active\" : \"nav-blank\"}\r\n      onClick={() => setShowTab(props.nav)}\r\n    >\r\n      {props.children}\r\n    </Button>\r\n  );\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {loading && <Loading centerScreen>Loading domaines...</Loading>}\r\n      {domain && (\r\n        <React.Fragment>\r\n          <Heading\r\n            header={domain.nameD}\r\n            content='Domaine'\r\n            description={domain.description}\r\n            component={\r\n              <ButtonGroup size='sm'>\r\n                <ButtonNav nav={1}>Processus</ButtonNav>\r\n                <ButtonNav nav={2}>Tables</ButtonNav>\r\n              </ButtonGroup>\r\n            }\r\n          />\r\n          {showTab === 1 && (\r\n            <ListProcesses filtered={filterProc} setSearch={setSearchProc} />\r\n          )}\r\n          {showTab === 2 && (\r\n            <ListTables filtered={filterTab} setSearch={setSearchTab} />\r\n          )}\r\n        </React.Fragment>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}