{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/aatf-views-very-last/src/views/admin/relations/domains.tsx\";\nimport React, { useState } from \"react\";\nimport { Card, DropdownItem, Table as TableElement, Button } from \"reactstrap\";\nimport Autocomplete from \"components/Autocomplete\";\nimport _ from \"lodash\";\nimport { useMutate } from \"restful-react\";\nexport default function DomainTable(props) {\n  const [domaines, setDomaines] = useState(props.collection);\n  const {\n    mutate: add\n  } = useMutate({\n    path: props.api.add,\n    verb: \"PATCH\"\n  });\n  const {\n    mutate: remove\n  } = useMutate({\n    path: props.api.remove,\n    verb: \"PATCH\"\n  });\n\n  const relate = d => {\n    add({\n      domaines: d._id\n    }).then(() => setDomaines([...domaines, d]));\n  };\n\n  const unrelate = d => {\n    remove({\n      domaines: d._id\n    }).then(() => setDomaines(domaines.filter(dom => dom !== d)));\n  };\n\n  const filter = (d, s) => _.includes(d.nameD, s) && !_.includes(domaines.map(e => e._id), d._id);\n\n  return /*#__PURE__*/React.createElement(Card, {\n    className: \"content-card margin-top-30\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Autocomplete, {\n    url: s => `/domaines`,\n    option: e => /*#__PURE__*/React.createElement(DropdownItem, {\n      onClick: () => relate(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }\n    }, e.nameD),\n    optionFilter: filter,\n    maxItems: 10,\n    placeholder: \"Link domaines by name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(TableElement, {\n    hover: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, domaines.map((d, key) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: key,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 15\n    }\n  }, d.nameD), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 15\n    }\n  }, _.take(d.description, 100)), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"text-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    outline: true,\n    onClick: () => unrelate(d),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, \"Unrelate\")))))));\n}","map":{"version":3,"sources":["/Users/mac/Desktop/aatf-views-very-last/src/views/admin/relations/domains.tsx"],"names":["React","useState","Card","DropdownItem","Table","TableElement","Button","Autocomplete","_","useMutate","DomainTable","props","domaines","setDomaines","collection","mutate","add","path","api","verb","remove","relate","d","_id","then","unrelate","filter","dom","s","includes","nameD","map","e","key","take","description"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Card, DropdownItem, Table as TableElement, Button } from \"reactstrap\";\r\nimport { Domain } from \"models/database\";\r\nimport Autocomplete from \"components/Autocomplete\";\r\nimport _ from \"lodash\";\r\nimport { useMutate } from \"restful-react\";\r\n\r\ninterface DomainRelationsProps<T> {\r\n  collection: Domain[];\r\n  api: {\r\n    add: string;\r\n    remove: string;\r\n  };\r\n}\r\n\r\nexport default function DomainTable<T>(props: DomainRelationsProps<T>) {\r\n  const [domaines, setDomaines] = useState(props.collection);\r\n\r\n  const { mutate: add } = useMutate({\r\n    path: props.api.add,\r\n    verb: \"PATCH\",\r\n  });\r\n\r\n  const { mutate: remove } = useMutate({\r\n    path: props.api.remove,\r\n    verb: \"PATCH\",\r\n  });\r\n\r\n  const relate = (d: Domain) => {\r\n    add({ domaines: d._id }).then(() => setDomaines([...domaines, d]));\r\n  };\r\n\r\n  const unrelate = (d: Domain) => {\r\n    remove({ domaines: d._id }).then(() =>\r\n      setDomaines(domaines.filter((dom) => dom !== d))\r\n    );\r\n  };\r\n\r\n  const filter = (d: Domain, s: string) =>\r\n    _.includes(d.nameD, s) &&\r\n    !_.includes(\r\n      domaines.map((e) => e._id),\r\n      d._id\r\n    );\r\n\r\n  return (\r\n    <Card className='content-card margin-top-30'>\r\n      <Autocomplete<Domain, Domain>\r\n        url={(s) => `/domaines`}\r\n        option={(e) => (\r\n          <DropdownItem onClick={() => relate(e)}>{e.nameD}</DropdownItem>\r\n        )}\r\n        optionFilter={filter}\r\n        maxItems={10}\r\n        placeholder='Link domaines by name'\r\n      />\r\n      <br />\r\n      <TableElement hover>\r\n        <thead>\r\n          <tr>\r\n            <th>Name</th>\r\n            <th>Description</th>\r\n            <th />\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {domaines.map((d, key) => (\r\n            <tr key={key}>\r\n              <td>{d.nameD}</td>\r\n              <td>{_.take(d.description, 100)}</td>\r\n              <td className='text-right'>\r\n                <Button outline onClick={() => unrelate(d)}>\r\n                  Unrelate\r\n                </Button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </TableElement>\r\n    </Card>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}